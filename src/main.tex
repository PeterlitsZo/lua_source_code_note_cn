\documentclass{ctexbook}


% Third-part package
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{listings}


% The base settings
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% for listings
\lstset{
    basicstyle=\ttfamily\fontsize{8.5pt}{8pt}\selectfont,
    breaklines,
    frame=tRBl,
    xleftmargin=2.5em,
}


% Command for the note
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% use cmd command to input the command, I do not like to use verb in `inline`
% mode.
\newcommand{\cmd}[1]{\,{\tt #1}\,}

% use verbatim to input the code
\lstnewenvironment{ccode}[2]{\lstset{language=C, caption={[#2]#2}, label={#1}}}{}
\lstnewenvironment{luacode}[2]{\lstset{language=lua, caption{[#2]#2}, label={#1}}}{}


% the main part
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}
    \input{src/chap/lex.tex}
\end{document}

